<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quiz</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: sans-serif;
    }
    textarea {
      background-color: #222;
      color: white;
      border: 1px solid #555;
      margin-bottom: 1em;
    }
    .mic-btn {
      margin: 0.5em 0;
      padding: 0.4em 0.8em;
      font-weight: bold;
      background-color: #444;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .mic-btn:hover {
      background-color: #666;
    }
  </style>
</head>
<body>
  <div class="hamburger-menu">
    <a href="progress.html">Progress</a>
    <a href="badges.html">Badges</a>
    <a href="settings.html">Settings</a>
  </div>

  <div class="sidebar" id="sidebar">
    <ul>
      <li><a href="home.html">Home</a></li>
      <li><a href="progress.html">Progress</a></li>
      <li><a href="badges.html">Badges</a></li>
      <li><a href = motionpractice.html>Motion Practice </a></li>
      <li><a href="settings.html">Settings</a></li>
    </ul>
  </div>

  <div class="main" id="main">
    <div class="top-bar">
      <button class="hamburger" onclick="toggleSidebar()">â˜°</button>
      <div class="profile">
        <a href="profile.html"><img src="pfp.jpg" alt="Profile" /></a>
      </div>
    </div>

    <h1>Random Motion Practice!</h1>
    <div class="content-box">
      <p><h2>"Random Motion"</h2></p>
<br>

      <textarea id="gov-text" placeholder="Gov/Opp arguments" rows="6" cols="50" style="width: 100%; padding: 0.75em; font-size: 1em;"></textarea>
      <button class="mic-btn" onclick="startVoiceInput('gov/opp-text')">ðŸŽ¤ Speak (Gov)</button>

<br>
<br>
      <a href="quiz_analysis.html"><button style="padding: 0.6em 1.2em; font-weight: bold;">Submit</button></a>
    </div>

    <div class="progress-container">
      <div class="step" id="step-basics">Basics</div>
      <div class="step" id="step-quiz">Motion Practice</div>
      <div class="step" id="step-think">How to Think</div>
      <div class="step" id="step-roles">Roles Module</div>
      <div class="step" id="step-trivia">Trivia</div>
      <div class="step" id="step-reading">Further Reading</div>
    </div>
  </div>

  <script>
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.classList.toggle('active');
    }

    const stepMap = {
      "content.html": "step-basics",
      "quiz.html": "step-quiz",
      "how-to-think.html": "step-think",
      "explain-roles.html": "step-roles",
      "roles-trivia.html": "step-trivia",
      "further-reading.html": "step-reading"
    };

    const currentPage = window.location.pathname.split("/").pop();
    const currentStepId = stepMap[currentPage];
    if (currentStepId) {
      const currentStepElement = document.getElementById(currentStepId);
      if (currentStepElement) currentStepElement.classList.add("active");
    }

    function startVoiceInput(textareaId) {
      const textarea = document.getElementById(textareaId);
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

      if (!SpeechRecognition) {
        alert("Speech recognition not supported in this browser.");
        return;
      }

      const recognition = new SpeechRecognition();
      recognition.lang = 'en-US';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = function (event) {
        const speechResult = event.results[0][0].transcript;
        textarea.value += (textarea.value ? '\n' : '') + speechResult;
        localStorage.setItem(textareaId, textarea.value);  // Store locally
      };

      recognition.onerror = function (event) {
        alert("Error occurred: " + event.error);
      };
    }

    // Load saved data if available
    window.onload = () => {
      ["gov-text", "opp-text"].forEach(id => {
        const saved = localStorage.getItem(id);
        if (saved) document.getElementById(id).value = saved;
      });
    };
  </script>
</body>
</html>
